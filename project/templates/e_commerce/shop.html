{% extends 'base.html' %}
{% load static %}

{% block title %}{{ category|default:"Shop" }} - PC Planet{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'monitors.css' %}">
{% endblock %}

{% block content %}
<!-- Page Title -->
<div class="pageTitleContainer">
    <h1 class="pageTitle">{{ category|default:"Our Products" }} Collection</h1>
    <p class="pageSubTitle">Choose the perfect product for your PC build.</p>
</div>

<!-- Search -->
<div class="searchContainer">
    <form method="GET" action="{% url 'shop' %}">
        <input type="text" name="q" placeholder="Search products..." value="{{ query|default:'' }}">
        <button type="submit">Search</button>
    </form>
</div>

<!-- Products -->
<div class="productsContainer">
    {% for product in products %}
    <div class="productCard">
        <img src="{{ product.image.url }}" class="productImg" alt="{{ product.name }}">
        <h3 class="productName">{{ product.name }}</h3>
        <p class="productPrice">${{ product.price }}</p>
        <p class="productStock" style="color: #666; font-size: 0.9em; margin-bottom: 10px;">
            {% if product.stock > 0 %}
            In Stock: {{ product.stock }}
            {% else %}
            <span style="color: red; font-weight: bold;">Out of Stock</span>
            {% endif %}
        </p>
        {% if product.stock > 0 %}
        <form method="post" action="{% url 'add_to_cart' product.id %}">
            {% csrf_token %}
            <button type="submit" class="btn productBtn">Add to Cart</button>
        </form>
        {% endif %}
    </div>
    {% empty %}
    <p>No products found.</p>
    {% endfor %}
</div>
{% endblock %}